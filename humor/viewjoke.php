<?php $_POST["errormessagetype"] = "html" ?><?php require_once("../includes/settings.php") ?><?php require_once("../includes/autologout.php") ?><?php require_once("../includes/constants.php") ?><?php require("../includes/errormessages.php") ?><?php require_once("../includes/dbfunctions.php") ?><?php require_once("../includes/jokefunctions.php") ?><?php require_once("../includes/authentication.php") ?><?phpopenConnection();if (isset($_GET["jokeid"])){	//(int) needed to protect against injection	$jokeid = (int) mysql_real_escape_string(htmlspecialchars($_GET["jokeid"], ENT_QUOTES));		if ($jokeid >= 1 && $jokeid <= $numjokes)	{		$query = "SELECT joketext FROM jokes WHERE jokeid={$jokeid}";		$result = mysql_query($query, $connection);		if (!$result)			die($_POST["preinvalidquery"] . mysql_error() . $_POST["postinvalidquery"]);		$row = mysql_fetch_row($result);		$joketext = $row[0];	}	else		$joketext = "<p>\nNo joke to display.\n</p>\n";}else	$joketext = "<p>\nNo joke to display.\n</p>\n";mysql_close($connection);?><?php require_once("../includes/header.php") ?><div id="navigation"><h3>Jokes</h3></div><div id="jokebody"><?php print $joketext ?></div><?php require_once("../includes/footer.php") ?>