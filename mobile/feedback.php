<!doctype html><html><head><meta charset="utf-8">   <meta name="viewport" content="width=device-width,initial-scale=1">   <title>Jester: The Online Joke Recommender</title>   	<?php include 'imports.php'; ?>   <?php $_POST["errormessagetype"] = "html" ?>   <?php require_once("../includes/settings.php") ?>   <?php require_once("../includes/autologout.php") ?>   <?php require_once("../includes/constants.php") ?>   <?php require("../includes/errormessages.php") ?>   <?php require_once("../includes/dbfunctions.php") ?>   <?php require_once("../includes/authentication.php") ?>   <?php user_session() ?>   <?php user_session_authenticate() ?>   </head>   <body>   <div data-role="page" data-theme="c">   <div data-role="header" data-position="inline" data-theme="e">   <h1><img src="jester_notext.gif" style="height:1em">Jester 4.0</h1>   <div data-role="navbar">   <?php include 'navbar.php'; ?>   </div>   </div>   <div data-role="content" data-theme="c"><?phpfunction sendFeedback($connection){	global $errorstr, $minfeedbacklength, $maxfeedbacklength;	//Validation		if (empty($_POST["feedback"]))	{		$errorstr = "You cannot submit blank feedback.";		return false;	}		if (strlen($_POST["feedback"]) < $minfeedbacklength)	{		$errorstr = "Your feedback is too short.";		return false;	}			if (strlen($_POST["feedback"]) > $maxfeedbacklength)	{		$errorstr = "Your feedback is too long. It cannot exceed " . number_format($maxfeedbacklength) . " characters.";		return false;	}		$userid = mysql_real_escape_string(htmlspecialchars($_SESSION["userid"], ENT_QUOTES));	$feedback = mysql_real_escape_string(htmlspecialchars($_POST["feedback"], ENT_QUOTES));		$query = "INSERT INTO feedback (userid, feedback) VALUES ({$userid}, '{$feedback}')";	$result = mysql_query($query, $connection);	if (!$result)		die($_POST["preinvalidquery"] . mysql_error() . $_POST["postinvalidquery"]);			return true;}?><!-- <?php require_once("../includes/header.php") ?><div id="navigation"> --><h2>Feedback</h2><!--<?php require_once("../includes/navbar.php") ?></div> --><?php$errors = false;if (isset($_POST["feedback"])){openConnection();if (!sendFeedback($connection)){$errors = true;?><div id="topnotice"><p class="error">Error: <?php print $errorstr ?></p></div><?php}mysql_close($connection);}?><div id="main"><?phpif (!isset($_POST["feedback"]) || $errors){?><p>We appreciate your interest in Jester and would be interested in your feedback. Please use the form below to let us know if you found the recommendations funny, if you have ideas for improving Jester, or anything else.</p><p><span class="important">Note:</span> Feedback must at least <?php print number_format($minfeedbacklength) ?> characters and at most <?php print number_format($maxfeedbacklength) ?> characters long. </p><?phpif (isset($_POST["feedback"]) && $errors)	$feedback = htmlspecialchars($_POST["feedback"], ENT_QUOTES);else	$feedback = "";?><form action="feedback.php" method="post"><p><textarea name="feedback" type="text"><?php print $feedback ?></textarea></p><p><input name="submit" type="submit" value="Submit" /></p></form><?php}else{?><p>Thank you for your feedback!</p><?php}?></div><?php require_once("../includes/footer.php") ?>   </div>   </div>   </body>   </html>